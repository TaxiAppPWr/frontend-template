<div class="container">
  <p-toast></p-toast>
  <h2>Uber - przejazd</h2>

  <label for="fromInput">Skąd</label>
  <input
    id="fromInput"
    [(ngModel)]="from"
    (input)="fetchSuggestions(from, 'from')"
  />
  <ul *ngIf="fromSuggestions.length">
    <li
      *ngFor="let suggestion of fromSuggestions"
      tabindex="0"
      role="button"
      (click)="selectSuggestion(suggestion, 'from')"
      (keydown.enter)="selectSuggestion(suggestion, 'from')"
      (keydown.space)="
        selectSuggestion(suggestion, 'from'); $event.preventDefault()
      "
    >
      {{ suggestion }}
    </li>
  </ul>

  <label for="toInput">Dokąd</label>
  <input id="toInput" [(ngModel)]="to" (input)="fetchSuggestions(to, 'to')" />
  <ul *ngIf="toSuggestions.length">
    <li
      *ngFor="let suggestion of toSuggestions"
      tabindex="0"
      role="button"
      (click)="selectSuggestion(suggestion, 'to')"
      (keydown.enter)="selectSuggestion(suggestion, 'to')"
      (keydown.space)="
        selectSuggestion(suggestion, 'to'); $event.preventDefault()
      "
    >
      {{ suggestion }}
    </li>
  </ul>

  <p-button
    label="Zamów"
    (onClick)="showPrice()"
    [disabled]="!from.trim() || !to.trim()"
    styleClass="p-button-sm p-button-primary"
  ></p-button>

  <div class="offer" *ngIf="showOffer">
    <p *ngIf="price !== null">
      <strong>Cena przejazdu:</strong> {{ price }} zł
    </p>
    <p-button
      label="Tak"
      (onClick)="confirm()"
      styleClass="p-button-sm p-button-success"
    ></p-button>
    <p-button
      label="Nie"
      (onClick)="cancelRide()"
      styleClass="p-button-sm p-button-danger"
    ></p-button>
  </div>

  <div class="summary" *ngIf="showSummary">
    <p>Przejazd: {{ from }} → {{ to }} | {{ price }} zł</p>
  </div>
</div>
